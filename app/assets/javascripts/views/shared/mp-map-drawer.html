<div class="mp-halfscreen-left mp-drawer-section">

  <!-- Toolbar -->
  <div class="mp-drawer-toolbar">
    <div class="md-searchbar md-homepage-centered" ng-class="{'md-homepage-centered': interface.centerSearchBar}">
      <button type="button" class="cp-input-btn btn btn-default" ng-hide="interface.centerSearchBar" ng-click="interface.showUserSection = true">
        <i class="icon-user"></i>
      </button>
      <button class="cp-input-btn btn btn-default" type="button" ng-click="interface.showMapDrawer = !interface.showMapDrawer" ng-hide="interface.centerSearchBar">Show detail</button>
      <input class="cp-input-naked form-control" type="text" placeholder="Type a place to start" mp-map-searchbox ng-model="searchbox.input" ng-change="hideHomepage(); getAutoComplete()">
      <button type="button" class="cp-input-btn btn btn-primary">Try</button>
      <!-- typeahead -->
      <ul class="cp-typeahead" ng-class="{'cp-typeahead-dropup': !interface.showMapDrawer}">
        <li ng-repeat="prediction in placePredictions">
          {{prediction.terms | mpPredictionFilter}}
        </li>
      </ul>
    </div>
  </div>

  <!-- Search results -->
  <div class="mp-drawer-body">
    <div class="mp-search-results" perfect-scrollbar="TheMap.searchResults.length">
      <div class="mp-list-contents-header lead">Showing {{TheMap.searchResults.length}} search results</div>

      <div class="mp-list-content-body">
        <div class="mp-place-search-results-item" ng-repeat="place in TheMap.searchResults">
          <div class="mp-place-marker-icon">
            <a href="" ng-click="TheMap.centerPlaceInMap(place.$$marker.getPosition())">
              <img ng-src="{{place.icon}}">
            </a>
          </div>
          <div class="mp-place-actions">
            <a href="" ng-click="TheMap.addPlaceToList(place)">
              <i class="icon-ok"></i>
            </a>
          </div>
          <div class="mp-place-detail-sidebar">
            <div class="mp-place-name-sidebar">{{place.name}}</div>
            <address>{{place.formatted_address}}</address>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>

<!-- Project details -->
<div class="mp-halfscreen-right" mp-tabs>

  <ul class="mp-side-tabs">
    <li class="mp-side-tab-active"><a href="">Marked places</a></li>
    <li><a href="">Edit project details</a></li>
  </ul>

  <div class="mp-tab-content">

    <!-- Tab 1 -->
    <div class="mp-tab-content-box mp-saved-places-list" perfect-scrollbar="MpProjects.currentProjectPlaces.length" ng-show="tabs[0].show">
      <div class="mp-drawer-body">
        <div class="mp-list-contents-header lead" ng-hide="!MpProjects.currentProject.title">{{MpProjects.currentProject.title}}</div>
        <div class="mp-list-contents-header lead" ng-hide="MpProjects.currentProject.title">{{MpProjects.currentProjectPlaces.length}} marked places</div>

        <div jquery-ui-sortable="place in MpProjects.currentProjectPlaces">
          <div class="mp-marked-place" ng-repeat="place in MpProjects.currentProjectPlaces" sidebar-place>
            <div class="mp-place-marker-icon">
              <a href="" ng-click="TheMap.centerPlaceInMap(place.$$marker.getPosition())">
                <img ng-src="/img/markers/number_{{$index}}.png">
              </a>
            </div>
            <div class="mp-place-actions">
              <a href="" ng-click="MpProjects.removePlace(place, $index)">
                <i class="icon-remove"></i>
              </a>
            </div>
            <div class="mp-place-detail-sidebar">
              <div class="mp-place-name-sidebar">{{place.name}}</div>
              <address>{{place.address}}</address>
              <p class="">{{place.notes}}</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tab 2 -->
    <div class="mp-tab-content-box" ng-show="tabs[1].show">
      <!-- show when logout -->
      <div class="mp-drawer-body" ng-hide="MpUser.checkLogin()">
        <h3>Sign up with Facebook to save your marked places</h3>
        <p class="lead">After sign up you can:</p>
        <ol class="lead">
          <li>Make maps with your friends, in real time.</li>
          <li>Create multiple maps.</li>
          <li>Share maps online.</li>
        </ol>
        <a href="" ng-click="fbLogin()" class="btn btn-primary">Sign up with Facebook</a>
      </div>
      <!-- show when login -->
      <div class="mp-drawer-body" ng-hide="!MpUser.checkLogin()" mp-edit-project-form>
        <form class="form-horizontal" name="editProjectForm">
          <legend>Edit Project: {{MpProjects.currentProject.title}}</legend>
          <div class="form-group">
            <label for="mp_edit_project_title" class="col-lg-2 control-label">Title</label>
            <div class="col-lg-10">
              <input type="text" class="form-control" id="mp_edit_project_title" placeholder="Project title" ng-model="editProject.title" name="title">
            </div>
          </div>
          <p class="text-danger">{{editProject.errorMessage}}</p>
          <div class="form-group">
            <label for="mp_edit_project_notes" class="col-lg-2 control-label">Notes</label>
            <div class="col-lg-10">
              <textarea id="mp_edit_project_notes" class="form-control" placeholder="Project notes" name="notes" ng-model="editProject.notes"></textarea>
            </div>
          </div>
          <div class="form-group">
            <div class="col-lg-offset-2 col-lg-10">
              <button type="button" class="btn btn-danger" ng-click="deleteProject()" ng-show="MpProjects.currentProject.owner_id == MpUser.getId()">Delete</button>
              <button type="submit" class="btn btn-primary" ng-click="saveChanges()">Save</button>
              <button type="button" class="btn btn-default" ng-click="revertChanges()">Revert</button>
            </div>
          </div>
        </form>
        <a href="" class="btn btn-primary" ng-click="showProjectAddFriendsModal()" ng-show="MpProjects.currentProject.owner_id == MpUser.getId()">Invite friend to this project</a>
      </div>
      <!-- END -->
    </div>

  </div>
</div>
